var VISUALLY_HIDDEN="visually-hidden",SHOW="popup-show",ERROR="feedback__error",openMapPopupButton=document.querySelector(".company-contacts__map-link"),bigMapPopup=document.querySelector(".big-map-wrapper"),closeMapPopupButton=document.querySelector(".big-map__close-btn"),closeMapPopupButtonClickHandler=function(){bigMapPopup.classList.add(VISUALLY_HIDDEN),bigMapPopup.classList.remove(SHOW),closeMapPopupButton.setAttribute("tabindex",-1),openMapPopupButton.focus(),closeMapPopupButton.removeEventListener("click",closeMapPopupButtonClickHandler)};openMapPopupButton&&openMapPopupButton.addEventListener("click",function(e){e.preventDefault(),bigMapPopup.classList.remove(VISUALLY_HIDDEN),bigMapPopup.classList.add(SHOW),closeMapPopupButton.setAttribute("tabindex",0),closeMapPopupButton.addEventListener("click",closeMapPopupButtonClickHandler)});var openFeedbackPopupButton=document.querySelector(".company-contacts__feedback-link"),feedbackPopup=document.querySelector(".feedback-wrapper"),feedbackForm=document.querySelector(".feedback__form"),closeFeedbackPopupButton=document.querySelector(".feedback__close-btn"),feedbackInputName=document.querySelector(".feedback__input--name"),feedbackInputEmail=document.querySelector(".feedback__input--email"),feedbackInputText=document.querySelector(".feedback__textarea"),feedbackSubmitButton=document.querySelector(".feedback__submit-btn"),isStorageSupport=!0,storage="";try{storage=localStorage.getItem("name-lastname")}catch(e){isStorageSupport=!1}var closeFeedbackPopupButtonClickHandler=function(){feedbackPopup.classList.add(VISUALLY_HIDDEN),feedbackPopup.classList.remove(SHOW),closeFeedbackPopupButton.setAttribute("tabindex",-1),feedbackInputName.setAttribute("tabindex",-1),feedbackInputEmail.setAttribute("tabindex",-1),feedbackInputText.setAttribute("tabindex",-1),feedbackSubmitButton.setAttribute("tabindex",-1),openFeedbackPopupButton.focus(),closeFeedbackPopupButton.removeEventListener("click",closeFeedbackPopupButtonClickHandler),feedbackSubmitButton.removeEventListener("click",feedbackSubmitButtonClickHandler)},feedbackSubmitButtonClickHandler=function(e){e.preventDefault(),feedbackInputName.value&&feedbackInputEmail.value&&feedbackInputText.value?(isStorageSupport&&(localStorage.setItem("name-lastname",feedbackInputName.value),localStorage.setItem("email",feedbackInputEmail.value)),feedbackForm.submit()):(feedbackPopup.classList.remove(ERROR),feedbackPopup.offsetWidth,feedbackPopup.classList.add(ERROR))};openFeedbackPopupButton&&openFeedbackPopupButton.addEventListener("click",function(e){e.preventDefault(),feedbackPopup.classList.remove(VISUALLY_HIDDEN),feedbackPopup.classList.add(SHOW),isStorageSupport&&(feedbackInputName.value=localStorage.getItem("name-lastname"),feedbackInputEmail.value=localStorage.getItem("email")),closeFeedbackPopupButton.setAttribute("tabindex",0),feedbackInputName.setAttribute("tabindex",0),feedbackInputEmail.setAttribute("tabindex",0),feedbackInputText.setAttribute("tabindex",0),feedbackSubmitButton.setAttribute("tabindex",0),feedbackSubmitButton.addEventListener("click",feedbackSubmitButtonClickHandler),closeFeedbackPopupButton.addEventListener("click",closeFeedbackPopupButtonClickHandler)});for(var catalog=document.querySelector(".product-catalog__list"),basketPopup=document.querySelector(".basket-notification"),addToBasketButtons=document.querySelectorAll(".product-catalog__item-link-buy"),basketContinueButton=document.querySelector(".basket-notification__close-btn"),basketCloseButton=document.querySelector(".basket-notification__continue-btn"),basketLinkButton=document.querySelector(".basket-notification__link"),BasketPopupCloseButtonClickHandler=function(){basketPopup.classList.add(VISUALLY_HIDDEN),basketPopup.classList.remove(SHOW),basketContinueButton.setAttribute("tabindex",-1),basketCloseButton.setAttribute("tabindex",-1),basketLinkButton.setAttribute("tabindex",-1),basketContinueButton.removeEventListener("click",BasketPopupCloseButtonClickHandler),basketCloseButton.removeEventListener("click",BasketPopupCloseButtonClickHandler)},i=0;i<addToBasketButtons.length;i++)addToBasketButtons[i].addEventListener("click",function(e){e.preventDefault(),basketPopup.classList.remove(VISUALLY_HIDDEN),basketPopup.classList.add(SHOW),basketContinueButton.setAttribute("tabindex",0),basketCloseButton.setAttribute("tabindex",0),basketLinkButton.setAttribute("tabindex",0),basketLinkButton.focus(),basketContinueButton.addEventListener("click",BasketPopupCloseButtonClickHandler),basketCloseButton.addEventListener("click",BasketPopupCloseButtonClickHandler)});
